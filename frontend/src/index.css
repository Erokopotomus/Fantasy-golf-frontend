@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CLUTCH BRAND SYSTEM — CSS Foundation
   Light-first with dark mode toggle
   ============================================ */

/* LIGHT MODE (default) */
:root {
  --bg: #FAFAF6;
  --bg-alt: #F0EDE6;
  --surface: #FFFFFF;
  --surface-alt: #F7F5F0;
  --stone: #E0DBD2;
  --text-1: #1A1A1A;
  --text-2: #65615A;
  --text-3: #A09A90;
  --nav-bg: #1E2A3A;
  --card-border: rgba(0,0,0,0.06);
  --card-shadow: 0 2px 8px rgba(0,0,0,0.04);
  --gauge-bg: #E0DBD2;

  /* RGB channels for Tailwind opacity modifier support */
  --bg-rgb: 250 250 246;
  --bg-alt-rgb: 240 237 230;
  --surface-rgb: 255 255 255;
  --surface-alt-rgb: 247 245 240;
  --stone-rgb: 224 219 210;
  --text-1-rgb: 26 26 26;
  --text-2-rgb: 101 97 90;
  --text-3-rgb: 160 154 144;

  /* Translucent surface layers (for glass cards, hover states) */
  --glass: rgba(0,0,0,0.03);
  --glass-hover: rgba(0,0,0,0.05);
  --glass-bright: rgba(0,0,0,0.08);

  /* Brand accents — RGB channels for opacity support */
  --blaze: #F06820;
  --blaze-hot: #FF8828;
  --blaze-deep: #D45A10;
  --blaze-rgb: 240 104 32;
  --slate: #1E2A3A;
  --slate-mid: #2C3E50;
  --slate-light: #3D5166;
  --field: #0D9668;
  --field-bright: #14B880;
  --field-rgb: 13 150 104;
  --crown: #D4930D;
  --crown-bright: #F0B429;
  --crown-rgb: 212 147 13;
  --crown-bright-rgb: 240 180 41;
  --live-red: #E83838;
  --live-red-rgb: 232 56 56;

  /* Tinted card backgrounds (light mode) */
  --tint-golf: #F0F7F4;
  --tint-nfl: #FFF5EE;
  --tint-news: #F4F3F0;
  --tint-rating: #FDF8EE;
  --tint-ai: #F0F2F5;

  /* Font families */
  --font-display: 'Bricolage Grotesque', sans-serif;
  --font-body: 'DM Sans', sans-serif;
  --font-data: 'JetBrains Mono', monospace;
  --font-editorial: 'Instrument Serif', serif;
}

/* DARK MODE */
.dark {
  --bg: #0E1015;
  --bg-alt: #151820;
  --surface: #1A1D26;
  --surface-alt: #1F222E;
  --stone: #2A2D38;
  --text-1: #EEEAE2;
  --text-2: #908C84;
  --text-3: #5C5952;
  --nav-bg: #111318;
  --card-border: rgba(255,255,255,0.06);
  --card-shadow: 0 2px 8px rgba(0,0,0,0.2);
  --gauge-bg: rgba(255,255,255,0.08);

  /* RGB channels */
  --bg-rgb: 14 16 21;
  --bg-alt-rgb: 21 24 32;
  --surface-rgb: 26 29 38;
  --surface-alt-rgb: 31 34 46;
  --stone-rgb: 42 45 56;
  --text-1-rgb: 238 234 226;
  --text-2-rgb: 144 140 132;
  --text-3-rgb: 92 89 82;

  /* Translucent surface layers */
  --glass: rgba(255,255,255,0.06);
  --glass-hover: rgba(255,255,255,0.09);
  --glass-bright: rgba(255,255,255,0.12);

  /* Dark mode tints */
  --tint-golf: #1A1D26;
  --tint-nfl: #1A1D26;
  --tint-news: #1A1D26;
  --tint-rating: #1A1D26;
  --tint-ai: #1A1D26;
}

/* Theme transition */
*, *::before, *::after {
  transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease;
}

/* Base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-body);
  background-color: var(--bg);
  color: var(--text-1);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg);
}

::-webkit-scrollbar-thumb {
  background: var(--stone);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-3);
}

/* Focus styles — Blaze */
:focus-visible {
  outline: 2px solid var(--blaze);
  outline-offset: 2px;
}

/* ============================================
   FONT UTILITY CLASSES
   ============================================ */
@layer utilities {
  .text-display {
    font-family: var(--font-display);
  }

  .text-body {
    font-family: var(--font-body);
  }

  .text-data {
    font-family: var(--font-data);
  }

  .text-editorial {
    font-family: var(--font-editorial);
    font-style: italic;
  }

  .text-gradient {
    @apply bg-gradient-to-r from-gold to-orange bg-clip-text text-transparent;
  }

  .card {
    @apply rounded-card backdrop-blur-xl backdrop-saturate-150 border;
    background: var(--glass);
    border-color: var(--card-border);
  }

  .card-hover {
    @apply hover:border-gold/30 hover:shadow-card-hover hover:scale-[1.02] transition-all duration-300;
    &:hover {
      background: var(--glass-hover);
    }
  }

  .card-interactive {
    @apply shadow-card hover:shadow-card-hover hover:scale-[1.02] hover:border-gold/30 transition-all duration-300 cursor-pointer;
  }

  .btn-press {
    @apply active:scale-[0.98] transition-transform duration-150;
  }
}

/* ============================================
   GLASS CARD CLASSES
   ============================================ */
@layer components {
  .glass-card {
    @apply rounded-card backdrop-blur-xl backdrop-saturate-150 border;
    background: var(--glass);
    border-color: var(--card-border);
  }

  .glass-card--highlighted {
    @apply rounded-card backdrop-blur-xl backdrop-saturate-150 border;
    background: var(--glass-hover);
    border-color: rgb(var(--crown-rgb) / 0.2);
  }
}

/* ============================================
   BUTTON CLASSES
   ============================================ */
@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center font-semibold font-display rounded-button
           text-white
           active:scale-[0.98] transition-all duration-300
           disabled:opacity-50 disabled:cursor-not-allowed;
    background: linear-gradient(135deg, #F06820, #FF8828);
    box-shadow: 0 4px 16px rgba(240, 104, 32, 0.16);
  }
  .btn-primary:hover {
    background: linear-gradient(135deg, #D45A10, #F06820);
    box-shadow: 0 6px 20px rgba(240, 104, 32, 0.25);
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center font-semibold rounded-button
           bg-transparent backdrop-blur-sm
           active:scale-[0.98] transition-all duration-300;
    border: 1px solid var(--stone);
    color: var(--text-1);
  }
  .btn-secondary:hover {
    background: var(--glass-hover);
    border-color: var(--text-3);
  }

  .btn-tertiary {
    @apply inline-flex items-center justify-center font-medium rounded-button
           bg-transparent text-text-secondary hover:text-text-primary
           active:scale-[0.98] transition-all duration-300;
  }
}

/* ============================================
   BADGE & TAG CLASSES
   ============================================ */
@layer components {
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-badge text-xs font-mono font-semibold uppercase tracking-wider;
  }

  .badge-active {
    @apply badge bg-accent-green/20 text-accent-green;
  }

  .badge-predraft {
    @apply badge bg-gold/20 text-gold;
  }

  .badge-live {
    @apply badge bg-rose/20 text-rose;
  }

  .badge-pro {
    @apply badge bg-gold/20 text-gold border border-gold/30;
  }

  .tag {
    @apply inline-flex items-center px-2.5 py-1 rounded-badge text-xs font-mono font-medium
           bg-surface text-text-secondary;
    border: 1px solid var(--card-border);
  }
}

/* ============================================
   COMPONENT STYLES
   ============================================ */
@layer components {
  .input-focus-glow {
    @apply focus:shadow-glow-gold;
  }

  .feature-card {
    @apply rounded-card backdrop-blur-xl backdrop-saturate-150 border p-6
           hover:border-gold/30 hover:shadow-card-hover hover:scale-[1.02]
           transition-all duration-300 cursor-pointer;
    background: var(--glass);
    border-color: var(--card-border);
  }

  .quick-action-btn {
    @apply w-full flex items-center gap-3 p-3 rounded-lg
           hover:shadow-card transition-all duration-300
           text-left active:scale-[0.98];
    background: var(--glass);
  }
  .quick-action-btn:hover {
    background: var(--glass-hover);
  }

  /* Loading spinner */
  .spinner {
    @apply w-4 h-4 border-2 border-text-primary/30 border-t-text-primary rounded-full animate-spin;
  }

  /* Skeleton loading */
  .skeleton {
    @apply animate-pulse rounded;
    background: var(--glass-bright);
  }

  /* Fade in animation */
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(0.8); }
}

/* Thin scrollbar for activity feeds */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: var(--stone) transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 4px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: var(--stone);
  border-radius: 2px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--text-3);
}

/* Typography improvements */
@layer base {
  h1, h2, h3, h4, h5, h6 {
    @apply leading-tight;
  }

  p {
    @apply leading-relaxed;
  }
}

/* ============================================
   MOBILE-FIRST ENHANCEMENTS
   ============================================ */

/* Safe area insets for notched devices */
@supports (padding: env(safe-area-inset-bottom)) {
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
}

/* Prevent pull-to-refresh on mobile when scrolling content */
.overscroll-contain {
  overscroll-behavior: contain;
}

/* Touch feedback improvements */
@layer utilities {
  .touch-feedback {
    @apply active:opacity-70 active:scale-[0.98] transition-all duration-150;
    -webkit-tap-highlight-color: transparent;
  }

  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* Mobile-optimized card interactions */
@layer components {
  .mobile-card {
    @apply active:scale-[0.99] active:opacity-90 transition-all duration-150;
    -webkit-tap-highlight-color: transparent;
  }

  /* Bottom navigation bar styles — glass */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 border-t backdrop-blur-xl backdrop-saturate-150;
    background: rgb(var(--bg-alt-rgb) / 0.85);
    border-color: var(--card-border);
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .bottom-nav-item {
    @apply flex flex-col items-center justify-center py-2 px-3 text-text-muted
           transition-colors duration-200 active:text-gold;
    -webkit-tap-highlight-color: transparent;
  }

  .bottom-nav-item.active {
    @apply text-gold;
  }

  .bottom-nav-item svg {
    @apply w-6 h-6 mb-1;
  }

  .bottom-nav-item span {
    @apply text-xs font-medium;
  }
}

/* Mobile-specific breakpoint styles */
@media (max-width: 640px) {
  /* Larger touch targets on mobile */
  button, a, [role="button"] {
    min-height: 44px;
  }

  /* Better text sizing for mobile */
  .text-2xl {
    font-size: 1.375rem;
  }

  /* Full-width buttons on mobile */
  .mobile-full-width {
    width: 100%;
  }

  /* Horizontal scroll containers */
  .mobile-scroll-x {
    display: flex;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .mobile-scroll-x::-webkit-scrollbar {
    display: none;
  }

  .mobile-scroll-x > * {
    scroll-snap-align: start;
    flex-shrink: 0;
  }

  /* Card stack for mobile */
  .mobile-card-stack {
    @apply space-y-3;
  }

  /* Better modal positioning on mobile */
  .mobile-modal {
    @apply fixed inset-x-4 bottom-4 top-auto max-h-[80vh] rounded-xl;
  }

  /* Sheet-style modals from bottom */
  .mobile-sheet {
    @apply fixed inset-x-0 bottom-0 rounded-t-2xl max-h-[90vh];
    padding-bottom: env(safe-area-inset-bottom, 16px);
  }

  /* Prevent body scroll when modal is open */
  body.modal-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
  }
}

/* Improve table scrolling on mobile */
@media (max-width: 768px) {
  .table-wrapper {
    @apply overflow-x-auto -mx-4 px-4;
    -webkit-overflow-scrolling: touch;
  }

  /* Sticky first column on tables */
  .table-sticky-col th:first-child,
  .table-sticky-col td:first-child {
    position: sticky;
    left: 0;
    z-index: 1;
    background: var(--bg-alt);
  }
}

/* Smooth momentum scrolling for iOS */
.momentum-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
}

/* Animation for slide up sheets */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out forwards;
}

/* Slide in from right for drawers */
@keyframes slide-in-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.25s ease-out forwards;
}

/* Swipe indicator for bottom sheets */
.swipe-indicator {
  @apply w-10 h-1 rounded-full mx-auto mb-4;
  background: var(--stone);
}

/* Pull to refresh indicator */
.pull-indicator {
  @apply h-12 flex items-center justify-center text-text-muted;
}

/* Floating action button — gold */
.fab {
  @apply fixed bottom-20 right-4 w-14 h-14 rounded-full bg-gold
         flex items-center justify-center shadow-lg shadow-gold/30
         active:scale-95 transition-transform z-40;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 4px);
}

@media (min-width: 768px) {
  .fab {
    @apply bottom-6 right-6;
  }
}
